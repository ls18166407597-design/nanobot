# Nanobot 全量文件清单

本清单覆盖当前仓库跟踪的全部文件，给出路径与用途说明。

说明：
- `用途` 为工程职责描述，重点用于定位和维护，不代表 API 文档。
- 生成时间：2026-02-13

## 阅读方式（提升可读性）

1. 先按目录前缀定位：`nanobot/`（内核）、`workspace/`（业务）、`docs/`（文档）、`scripts/`（运维）。  
2. 再按文件类型过滤：`.py` 看逻辑实现，`.md` 看规则与说明，`.sh` 看运维脚本。  
3. 需要快速定位时，直接搜索完整路径关键字（例如 `agent/turn_engine.py`）。  
4. 本文只负责索引，不承担设计说明；设计说明请看 `docs/项目结构.md` 与 `ARCHITECTURE.md`。

## 文件列表

| 路径 | 用途 |
| --- | --- |
| `ARCHITECTURE.md` | 核心架构契约与分层边界 |
| `Dockerfile` | 容器构建入口 |
| `LICENSE` | 开源许可证 |
| `PROJECT_OVERVIEW_CN.md` | 中文项目总览（运行流程、权限、排障） |
| `README.md` | 中文总览与快速开始说明 |
| `README_EN.md` | 英文总览与快速开始说明 |
| `SECURITY.md` | 安全策略与漏洞披露说明 |
| `bridge/package.json` | 桥接服务 Node 依赖与脚本配置 |
| `bridge/src/index.ts` | 桥接服务 TypeScript 源码 |
| `bridge/src/server.ts` | 桥接服务 TypeScript 源码 |
| `bridge/src/types.d.ts` | 桥接服务 TypeScript 源码 |
| `bridge/src/whatsapp.ts` | 桥接服务 TypeScript 源码 |
| `bridge/tsconfig.json` | 桥接服务 TypeScript 编译配置 |
| `docs/文件清单.md` | 项目文档文件 |
| `docs/路线图.md` | 项目文档文件 |
| `docs/文档导航.md` | 文档总览入口与职责映射 |
| `docs/配置指南.md` | 项目文档文件 |
| `docs/项目结构.md` | 项目文档文件 |
| `nanobot/__init__.py` | 包元数据与版本导出 |
| `nanobot/__main__.py` | 模块启动入口 |
| `nanobot/agent/__init__.py` | agent 子包初始化 |
| `nanobot/agent/context.py` | 系统提示词与上下文构建 |
| `nanobot/agent/context_guard.py` | 上下文窗口与 token 防护 |
| `nanobot/agent/executor.py` | 工具调用执行与错误归一 |
| `nanobot/agent/failure_types.py` | 故障事件类型与级别定义 |
| `nanobot/agent/file_write_policy.py` | 文件写策略（只读/受控写）实现 |
| `nanobot/agent/incident_manager.py` | 统一故障中枢（去重、升级、持久化） |
| `nanobot/agent/loop.py` | Agent 主循环与生命周期协调 |
| `nanobot/agent/memory.py` | 记忆读写与检索逻辑 |
| `nanobot/agent/message_flow.py` | 消息泳道、繁忙控制与投递流 |
| `nanobot/agent/models.py` | 模型注册表与模型元信息管理 |
| `nanobot/agent/origin_resolver.py` | 消息来源与回传目标解析 |
| `nanobot/agent/provider_router.py` | 模型/供应商路由与故障切换 |
| `nanobot/agent/skills.py` | 技能发现与加载逻辑 |
| `nanobot/agent/system_turn_service.py` | 系统回合处理服务 |
| `nanobot/agent/task_manager.py` | 任务状态持久化与调度辅助 |
| `nanobot/agent/tool_bootstrapper.py` | 默认工具装配与启停控制 |
| `nanobot/agent/tools/__init__.py` | 工具子包初始化 |
| `nanobot/agent/tools/base.py` | 工具基类与 ToolResult 协议 |
| `nanobot/agent/tools/browser.py` | Playwright 本地浏览器检索/浏览工具 |
| `nanobot/agent/tools/cron.py` | 定时任务管理工具 |
| `nanobot/agent/tools/feishu.py` | 飞书接口工具 |
| `nanobot/agent/tools/filesystem.py` | 文件读写/编辑/目录列表工具 |
| `nanobot/agent/tools/github.py` | GitHub 工具（MCP 后端封装） |
| `nanobot/agent/tools/gmail.py` | Gmail IMAP/SMTP 工具 |
| `nanobot/agent/tools/knowledge.py` | 本地知识库读写检索工具 |
| `nanobot/agent/tools/mac.py` | macOS 控制工具 |
| `nanobot/agent/tools/mac_vision.py` | macOS 屏幕视觉识别工具 |
| `nanobot/agent/tools/mcp.py` | 通用 MCP 工具（list_servers/list_tools/call_tool） |
| `nanobot/agent/tools/memory.py` | 记忆工具（search/read/write） |
| `nanobot/agent/tools/message.py` | 外部通道消息发送工具 |
| `nanobot/agent/tools/provider.py` | 模型供应商管理工具 |
| `nanobot/agent/tools/qq_mail.py` | QQ 邮箱 IMAP/SMTP 工具 |
| `nanobot/agent/tools/registry.py` | 工具注册中心与元数据暴露 |
| `nanobot/agent/tools/shell.py` | 命令执行工具（受安全策略约束） |
| `nanobot/agent/tools/skills.py` | 技能相关工具 |
| `nanobot/agent/tools/system_status.py` | 系统状态、失败事件与运行态清理工具 |
| `nanobot/agent/tools/task.py` | 任务执行与管理工具 |
| `nanobot/agent/tools/tavily.py` | Tavily 联网检索工具（API） |
| `nanobot/agent/tools/tianapi.py` | 天行热点/资讯 API 工具 |
| `nanobot/agent/tools/tushare.py` | Tushare 金融数据工具 |
| `nanobot/agent/tools/weather.py` | 天气查询工具 |
| `nanobot/agent/turn_engine.py` | 单回合状态机执行引擎 |
| `nanobot/agent/user_turn_service.py` | 用户回合处理服务 |
| `nanobot/bus/__init__.py` | 事件总线与消息事件定义 |
| `nanobot/bus/events.py` | 事件总线与消息事件定义 |
| `nanobot/bus/queue.py` | 事件总线与消息事件定义 |
| `nanobot/channels/__init__.py` | 聊天通道接入实现文件 |
| `nanobot/channels/base.py` | 聊天通道接入实现文件 |
| `nanobot/channels/discord.py` | 聊天通道接入实现文件 |
| `nanobot/channels/feishu.py` | 聊天通道接入实现文件 |
| `nanobot/channels/imessage.py` | 聊天通道接入实现文件 |
| `nanobot/channels/manager.py` | 聊天通道接入实现文件 |
| `nanobot/channels/telegram.py` | 聊天通道接入实现文件 |
| `nanobot/channels/telegram_format.py` | 聊天通道接入实现文件 |
| `nanobot/channels/telegram_media.py` | 聊天通道接入实现文件 |
| `nanobot/channels/whatsapp.py` | 聊天通道接入实现文件 |
| `nanobot/cli/__init__.py` | CLI 命令实现文件 |
| `nanobot/cli/commands.py` | CLI 命令实现文件 |
| `nanobot/cli/config.py` | CLI 命令实现文件 |
| `nanobot/cli/doctor.py` | CLI 命令实现文件 |
| `nanobot/cli/new.py` | CLI 命令实现文件 |
| `nanobot/cli/runtime_commands.py` | CLI 运行态命令实现（gateway/stop/restart/status/health 等） |
| `nanobot/config/__init__.py` | 配置模型、加载与迁移逻辑 |
| `nanobot/config/loader.py` | 配置模型、加载与迁移逻辑 |
| `nanobot/config/schema.py` | 配置模型、加载与迁移逻辑 |
| `nanobot/cron/__init__.py` | Cron 调度服务与类型定义 |
| `nanobot/cron/service.py` | Cron 调度服务与类型定义 |
| `nanobot/cron/types.py` | Cron 调度服务与类型定义 |
| `nanobot/heartbeat/__init__.py` | 心跳服务与主动维护任务 |
| `nanobot/heartbeat/service.py` | 心跳服务与主动维护任务 |
| `nanobot/hooks/__init__.py` | Hook 扩展点导出 |
| `nanobot/hooks/registry.py` | 生命周期 Hook 注册与触发 |
| `nanobot/mcp/__init__.py` | MCP 客户端模块导出 |
| `nanobot/mcp/client.py` | MCP stdio 客户端实现 |
| `nanobot/maintenance/setup_dev.sh` | 维护与开发辅助脚本 |
| `nanobot/process/__init__.py` | 命令泳道与执行队列实现 |
| `nanobot/process/command_queue.py` | 命令泳道与执行队列实现 |
| `nanobot/process/lanes.py` | 命令泳道与执行队列实现 |
| `nanobot/providers/__init__.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/adapters.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/base.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/factory.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/gemini_provider.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/litellm_provider.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/openai_provider.py` | LLM Provider 抽象与实现 |
| `nanobot/providers/transcription.py` | LLM Provider 抽象与实现 |
| `nanobot/runtime/failures.py` | 运行失败事件持久化与摘要 |
| `nanobot/runtime/state.py` | 运行态清理函数（sessions/failures/logs） |
| `nanobot/scripts/quality_audit.sh` | 安全/质量检查脚本 |
| `nanobot/scripts/safe_push.sh` | 安全/质量检查脚本 |
| `nanobot/scripts/secret_scanner.sh` | 安全/质量检查脚本 |
| `nanobot/session/__init__.py` | 会话键管理与服务层 |
| `nanobot/session/manager.py` | 会话键管理与服务层 |
| `nanobot/session/service.py` | 会话键管理与服务层 |
| `nanobot/tests/gemini_capability_test.py` | Python 自动化测试用例 |
| `nanobot/tests/test_channel_routing.py` | Python 自动化测试用例 |
| `nanobot/tests/test_config_compat.py` | Python 自动化测试用例 |
| `nanobot/tests/test_contracts.py` | Python 自动化测试用例 |
| `nanobot/tests/test_core_spine.py` | Python 自动化测试用例 |
| `nanobot/tests/test_docker.sh` | 测试辅助 Shell 脚本 |
| `nanobot/tests/test_health_snapshot.py` | Python 自动化测试用例 |
| `nanobot/tests/test_incident_manager.py` | Python 自动化测试用例 |
| `nanobot/tests/test_mac_confirm.py` | Python 自动化测试用例 |
| `nanobot/tests/test_message_flow.py` | Python 自动化测试用例 |
| `nanobot/tests/test_origin_resolver.py` | Python 自动化测试用例 |
| `nanobot/tests/test_provider_tool_actions.py` | Python 自动化测试用例 |
| `nanobot/tests/test_proxy_fallback.py` | Python 自动化测试用例 |
| `nanobot/tests/test_session_manager_keys.py` | Python 自动化测试用例 |
| `nanobot/tests/test_system_error_routing.py` | Python 自动化测试用例 |
| `nanobot/tests/test_system_status_tool.py` | Python 自动化测试用例 |
| `nanobot/tests/test_system_turn_service.py` | Python 自动化测试用例 |
| `nanobot/tests/test_task_state_machine.py` | Python 自动化测试用例 |
| `nanobot/tests/test_telegram_helpers.py` | Python 自动化测试用例 |
| `nanobot/tests/test_tool_config_migration.py` | Python 自动化测试用例 |
| `nanobot/tests/test_tool_safety.py` | Python 自动化测试用例 |
| `nanobot/tests/test_tool_validation.py` | Python 自动化测试用例 |
| `nanobot/tests/test_user_turn_service.py` | Python 自动化测试用例 |
| `nanobot/utils/__init__.py` | 通用工具函数与审计能力 |
| `nanobot/utils/audit.py` | 通用工具函数与审计能力 |
| `nanobot/utils/helpers.py` | 通用工具函数与审计能力 |
| `pyproject.toml` | Python 项目构建、依赖与工具配置 |
| `scripts/run_gateway.sh` | 网关标准启动脚本（含环境变量与日志约定） |
| `scripts/smoke_regression.py` | 核心链路烟雾回归脚本 |
| `start.sh` | 本地快捷启动脚本 |
| `workspace/AGENTS.md` | 工作区执行规则（高优先级约束） |
| `workspace/HEARTBEAT.md` | 心跳与维护策略文档 |
| `workspace/IDENTITY.md` | 工作区身份与行为设定 |
| `workspace/TOOLS.md` | 工作区工具策略与组合技 |
| `workspace/USER.md` | 用户偏好与使用约定 |
| `workspace/scripts/contacts/contacts.json` | 工作区结构化配置/数据文件 |
| `workspace/scripts/README.md` | 工作区脚本入口索引与调用示例 |
| `workspace/scripts/contacts/manage_contacts.py` | 工作区业务自动化脚本 |
| `workspace/scripts/dispatch/smart_send.py` | 工作区业务自动化脚本 |
| `workspace/scripts/telegram/automate_telegram_blind.py` | 工作区业务自动化脚本 |
| `workspace/scripts/telegram/automate_telegram_keyboard_final.py` | 工作区业务自动化脚本 |
| `workspace/scripts/telegram/tg_checkin_task_blind.py` | 工作区业务自动化脚本 |
| `workspace/scripts/telegram/tg_water_task.py` | 工作区业务自动化脚本 |
| `workspace/scripts/telegram/tg_water_task_blind.py` | 工作区业务自动化脚本 |
| `workspace/scripts/vision/vision_optimizer.sh` | 工作区脚本工具 |
| `workspace/scripts/wechat/automate_wechat_keyboard_final.py` | 工作区业务自动化脚本 |
| `workspace/skills/automated-messaging/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/clawhub/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/computer-control/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/cron/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/github/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/html-cleanup/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/html-cleanup/scripts/clean_html.py` | 工作区技能私有脚本 |
| `workspace/skills/mail/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/mail/scripts/check_emails.py` | 工作区技能私有脚本 |
| `workspace/skills/mail/scripts/mark_gmail_read.py` | 工作区技能私有脚本 |
| `workspace/skills/mail/scripts/mark_qq_read.py` | 工作区技能私有脚本 |
| `workspace/skills/peekaboo/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/project-sentinel/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/skill-creator/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/summarize/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/system-cleaner/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/system-health-check/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/system-health-check/scripts/regression_suite.py` | 工作区技能脚本 |
| `workspace/skills/system-health-check/scripts/verify_all.py` | 工作区技能脚本 |
| `workspace/skills/tmux/SKILL.md` | 工作区自定义技能说明 |
| `workspace/skills/tmux/scripts/find-sessions.sh` | 工作区技能脚本 |
| `workspace/skills/tmux/scripts/wait-for-text.sh` | 工作区技能脚本 |
| `workspace/skills/train-ticket/SKILL.md` | 工作区自定义技能说明 |
| `workspace/tests/test_v2_hardening.py` | 工作区测试用例 |

注：文件总量请以 `git ls-files` 实时结果为准。
