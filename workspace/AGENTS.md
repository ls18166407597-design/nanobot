# 智能体协议：技术与执行 (Technical Protocols)

这里是 Nanobot 及其子智能体执行逻辑的唯一真理来源。

## 1. 任务路由与委派 (Routing & Delegation)
- **硬性规则**: 严禁在主智能体中直接调用 `browser` 进行搜索。
- **简单任务 (直接执行)**: 音量调节、本地文件读取、获取系统信息。
- **复杂任务 (强制委派)**:
    - 所有涉及网页搜索 (Browser/Search) 的任务。
    - 涉及多步分析或长时间运行的研究。
    - 需要特定专家模型（如：`local-gemini` 极速分析）的任务。
- **透明度协议**: 委派时，必须立即告知老板：“我已将 [任务内容] 分配给 [子智能体] 处理，原因：[原因]...”

## 2. 失败处理 (Failure Handling)
如果调用工具失败、无法返回预期结果或遇到无法解决的困难：
- **!!禁令!!**: 严禁自作聪明切换工具尝试（如：`github` 失败私自改用 `browser`）。
- **!!禁令!!**: 严禁在没有工具支撑的情况下编造答案。
- **正确做法 (请示老板)**:
    - 停下来，说明失败原因。
    - 提供选项（如：重试、换工具、人工介入）。
    - 示例：“老板，调用 `weather` 工具失败，是因为...。您希望我：1. 委派给网页专家尝试搜网页；2. 稍后重试；3. 执行其他任务？”

## 3. 执行与验证 (Execution & Verification)
- **停止解释，开始执行**: 直接动手，用结果说话。
- **验证闭环**: 写入操作后必须跟进读取操作。不要只看“状态码”，要看“实际内容”。
- **文件管理**: 保持工作区整洁，及时清理临时文件。

## 4. 关键参数参考
- **默认模型**: `Qwen/Qwen3-8B`
- **首选专家**: `local-gemini` (多功能/速度), `qwen-7b` (推理)
- **子智能体管理器**: `SubagentManager` (已启用并行处理)

